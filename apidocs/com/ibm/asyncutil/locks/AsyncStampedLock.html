<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_112) on Mon Aug 14 15:57:09 CDT 2017 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>AsyncStampedLock (async-util 0.0.1-SNAPSHOT API)</title>
<meta name="date" content="2017-08-14">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="AsyncStampedLock (async-util 0.0.1-SNAPSHOT API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":17,"i1":17,"i2":6};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"],16:["t5","Default Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/AsyncStampedLock.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../com/ibm/asyncutil/locks/AsyncSemaphore.html" title="interface in com.ibm.asyncutil.locks"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../com/ibm/asyncutil/locks/AsyncStampedLock.Stamp.html" title="interface in com.ibm.asyncutil.locks"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/ibm/asyncutil/locks/AsyncStampedLock.html" target="_top">Frames</a></li>
<li><a href="AsyncStampedLock.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.ibm.asyncutil.locks</div>
<h2 title="Interface AsyncStampedLock" class="title">Interface AsyncStampedLock</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Superinterfaces:</dt>
<dd><a href="../../../../com/ibm/asyncutil/locks/AsyncReadWriteLock.html" title="interface in com.ibm.asyncutil.locks">AsyncReadWriteLock</a></dd>
</dl>
<dl>
<dt>All Known Implementing Classes:</dt>
<dd><a href="../../../../com/ibm/asyncutil/locks/FairAsyncStampedLock.html" title="class in com.ibm.asyncutil.locks">FairAsyncStampedLock</a></dd>
</dl>
<hr>
<br>
<pre>public interface <span class="typeNameLabel">AsyncStampedLock</span>
extends <a href="../../../../com/ibm/asyncutil/locks/AsyncReadWriteLock.html" title="interface in com.ibm.asyncutil.locks">AsyncReadWriteLock</a></pre>
<div class="block">An asynchronously acquirable read-write lock which additionally provides an optimistic read mode.
 Optimistic read mode can be thought of as a weak reader mode which does not prevent writers from
 acquiring the lock.

 <p>
 In practice, optimistic reads of brief read-only sections can reduce memory contention. Great
 care must be taken when reading mutable variables, however, as they can change at any point and
 knowledge of the underlying accessed structures is necessary to ensure a consistent view of the
 variables.

 <p>
 Consider the following example. The BitSet class is not inherently thread-safe, so we need a lock
 to protect it. Further, our hypothetical use case exhibits only rare modifications but extremely
 frequent queries, which may justify an optimistic read design:

 <pre>
 <code>
 BitSet bits = new BitSet();

 Future&lt;Boolean&gt; isSet(int idx) {
   // first attempt to optimistically read; if it fails,
   // fall back to full read lock
   final Stamp stamp = this.lock.tryOptimisticRead();

   // lock may already be held, first check the stamp
   if (stamp != null) {

     // BitSet is internally "safe" to concurrent modification during reads
     // i.e. structures cannot be corrupted, but results may be inconsistent
     // for example these individual bits might be separately modified
     final boolean optimistic = this.bits.get(idx) &amp;&amp; this.bits.get(idx+1);

     // the read value can only be considered correct if
     // the write lock was not acquired in the interim
     if (stamp.validate()) {
       return Futures.of(optimistic);
     }
   }

   // otherwise, if the write lock was already held, or acquired afterwards,
   // acquire the full read lock for a consistent result (fall back from optimism)
   return this.lock.acquireReadLock().map(lockToken -&gt; {
     try {
       return this.bits.get(idx) &amp;&amp; this.bits.get(idx+1);
     } finally {
       lockToken.releaseReadLock();
     }
   }
 }
 </code>
 </pre>

 <p>
 This interface draws inspiration from the standard library's
 <a href="http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/locks/StampedLock.html?is-external=true" title="class or interface in java.util.concurrent.locks"><code>StampedLock</code></a> but certain implementation details may differ.
 Identical behavior should not be expected from both locking facilities beyond what is explicitly
 documented.

 <p>
 Implementations will specify whether their lock acquisition is fair or not; this interface does
 not define this requirement.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../com/ibm/asyncutil/locks/AsyncReadWriteLock.html" title="interface in com.ibm.asyncutil.locks"><code>AsyncReadWriteLock</code></a>, 
<a href="http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/locks/StampedLock.html?is-external=true" title="class or interface in java.util.concurrent.locks"><code>StampedLock</code></a></dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Interface and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static interface&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/ibm/asyncutil/locks/AsyncStampedLock.Stamp.html" title="interface in com.ibm.asyncutil.locks">AsyncStampedLock.Stamp</a></span></code>
<div class="block">An object indicating a successful optimistic read attempt.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="nested.classes.inherited.from.class.com.ibm.asyncutil.locks.AsyncReadWriteLock">
<!--   -->
</a>
<h3>Nested classes/interfaces inherited from interface&nbsp;com.ibm.asyncutil.locks.<a href="../../../../com/ibm/asyncutil/locks/AsyncReadWriteLock.html" title="interface in com.ibm.asyncutil.locks">AsyncReadWriteLock</a></h3>
<code><a href="../../../../com/ibm/asyncutil/locks/AsyncReadWriteLock.ReadLockToken.html" title="interface in com.ibm.asyncutil.locks">AsyncReadWriteLock.ReadLockToken</a>, <a href="../../../../com/ibm/asyncutil/locks/AsyncReadWriteLock.WriteLockToken.html" title="interface in com.ibm.asyncutil.locks">AsyncReadWriteLock.WriteLockToken</a></code></li>
</ul>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t5" class="tableTab"><span><a href="javascript:show(16);">Default Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>static <a href="../../../../com/ibm/asyncutil/locks/AsyncStampedLock.html" title="interface in com.ibm.asyncutil.locks">AsyncStampedLock</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/ibm/asyncutil/locks/AsyncStampedLock.html#create--">create</a></span>()</code>
<div class="block">Creates an <a href="../../../../com/ibm/asyncutil/locks/AsyncStampedLock.html" title="interface in com.ibm.asyncutil.locks"><code>AsyncStampedLock</code></a></div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>static <a href="../../../../com/ibm/asyncutil/locks/AsyncStampedLock.html" title="interface in com.ibm.asyncutil.locks">AsyncStampedLock</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/ibm/asyncutil/locks/AsyncStampedLock.html#createFair--">createFair</a></span>()</code>
<div class="block">Creates a fair <a href="../../../../com/ibm/asyncutil/locks/AsyncStampedLock.html" title="interface in com.ibm.asyncutil.locks"><code>AsyncStampedLock</code></a></div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code><a href="../../../../com/ibm/asyncutil/locks/AsyncStampedLock.Stamp.html" title="interface in com.ibm.asyncutil.locks">AsyncStampedLock.Stamp</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/ibm/asyncutil/locks/AsyncStampedLock.html#tryOptimisticRead--">tryOptimisticRead</a></span>()</code>
<div class="block">Attempt to acquire a <a href="../../../../com/ibm/asyncutil/locks/AsyncStampedLock.Stamp.html" title="interface in com.ibm.asyncutil.locks"><code>AsyncStampedLock.Stamp</code></a> in optimistic-read mode if the lock is not already
 write-locked.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.com.ibm.asyncutil.locks.AsyncReadWriteLock">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;com.ibm.asyncutil.locks.<a href="../../../../com/ibm/asyncutil/locks/AsyncReadWriteLock.html" title="interface in com.ibm.asyncutil.locks">AsyncReadWriteLock</a></h3>
<code><a href="../../../../com/ibm/asyncutil/locks/AsyncReadWriteLock.html#acquireReadLock--">acquireReadLock</a>, <a href="../../../../com/ibm/asyncutil/locks/AsyncReadWriteLock.html#acquireWriteLock--">acquireWriteLock</a>, <a href="../../../../com/ibm/asyncutil/locks/AsyncReadWriteLock.html#tryReadLock--">tryReadLock</a>, <a href="../../../../com/ibm/asyncutil/locks/AsyncReadWriteLock.html#tryWriteLock--">tryWriteLock</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="tryOptimisticRead--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>tryOptimisticRead</h4>
<pre><a href="../../../../com/ibm/asyncutil/locks/AsyncStampedLock.Stamp.html" title="interface in com.ibm.asyncutil.locks">AsyncStampedLock.Stamp</a>&nbsp;tryOptimisticRead()</pre>
<div class="block">Attempt to acquire a <a href="../../../../com/ibm/asyncutil/locks/AsyncStampedLock.Stamp.html" title="interface in com.ibm.asyncutil.locks"><code>AsyncStampedLock.Stamp</code></a> in optimistic-read mode if the lock is not already
 write-locked. The stamp may subsequently be <a href="../../../../com/ibm/asyncutil/locks/AsyncStampedLock.Stamp.html#validate--"><code>validated</code></a> to check whether
 the write lock has been acquired</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a non-null Stamp if the lock is not currently write-locked. Otherwise, returns <code>null</code></dd>
</dl>
</li>
</ul>
<a name="create--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>create</h4>
<pre>static&nbsp;<a href="../../../../com/ibm/asyncutil/locks/AsyncStampedLock.html" title="interface in com.ibm.asyncutil.locks">AsyncStampedLock</a>&nbsp;create()</pre>
<div class="block">Creates an <a href="../../../../com/ibm/asyncutil/locks/AsyncStampedLock.html" title="interface in com.ibm.asyncutil.locks"><code>AsyncStampedLock</code></a>

 <p>
 The returned lock is only guaranteed to meet the requirements of <a href="../../../../com/ibm/asyncutil/locks/AsyncStampedLock.html" title="interface in com.ibm.asyncutil.locks"><code>AsyncStampedLock</code></a>; in
 particular, no guarantee of fairness is provided.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../com/ibm/asyncutil/locks/AsyncReadWriteLock.html#create--">create</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/ibm/asyncutil/locks/AsyncReadWriteLock.html" title="interface in com.ibm.asyncutil.locks">AsyncReadWriteLock</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a new <a href="../../../../com/ibm/asyncutil/locks/AsyncStampedLock.html" title="interface in com.ibm.asyncutil.locks"><code>AsyncStampedLock</code></a></dd>
</dl>
</li>
</ul>
<a name="createFair--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>createFair</h4>
<pre>static&nbsp;<a href="../../../../com/ibm/asyncutil/locks/AsyncStampedLock.html" title="interface in com.ibm.asyncutil.locks">AsyncStampedLock</a>&nbsp;createFair()</pre>
<div class="block">Creates a fair <a href="../../../../com/ibm/asyncutil/locks/AsyncStampedLock.html" title="interface in com.ibm.asyncutil.locks"><code>AsyncStampedLock</code></a></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../com/ibm/asyncutil/locks/AsyncReadWriteLock.html#createFair--">createFair</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/ibm/asyncutil/locks/AsyncReadWriteLock.html" title="interface in com.ibm.asyncutil.locks">AsyncReadWriteLock</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a new <a href="../../../../com/ibm/asyncutil/locks/AsyncStampedLock.html" title="interface in com.ibm.asyncutil.locks"><code>AsyncStampedLock</code></a> with a fair implementation</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/AsyncStampedLock.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../com/ibm/asyncutil/locks/AsyncSemaphore.html" title="interface in com.ibm.asyncutil.locks"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../com/ibm/asyncutil/locks/AsyncStampedLock.Stamp.html" title="interface in com.ibm.asyncutil.locks"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/ibm/asyncutil/locks/AsyncStampedLock.html" target="_top">Frames</a></li>
<li><a href="AsyncStampedLock.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2017. All rights reserved.</small></p>
</body>
</html>
